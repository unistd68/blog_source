---
title: 【原理】HTTP基本知识
urlname: http-knowledge
tags: 
- 前端
- http
- 网络
categories: 原理
abbrlink: 27813
date: 2018-11-22 13:15:06
comments: true
img: https://blog.xtcgch.ink/img/动漫/pic-01.jpg
---

http应该是每个做过网络编程的程序员都应该去了解的一个协议，只是根据自身业务和职业方向来决定是否深入专研还是浅尝辄止。对于我来说，只需要初步理解http的原理就可以了。

<!--more-->

---

## 简介

- HTTP协议（Hyper Text Transfer Protocol，超文本传输协议）,是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。
- HTTP基于TCP/IP通信协议来传递数据。
- HTTP基于客户端/服务端（C/S）架构模型，通过一个可靠的链接来交换信息，是一个无状态的请求/响应协议。

## 请求体

![请求体](./http-request-body.jpg)

## 请求方法

- HEAD: 仅请求响应首部
- GET: 完整请求一个资源 （常用
- PUT: (webdav) 上传文件（但是浏览器不支持该方法）
- POST：提交表单  （常用）
- DELETE：(webdav) 删除
- TRACE: 追求一个资源请求中间所经过的代理（该方法不能由浏览器发出）
- OPTIONS：返回请求的资源所支持的方法的方法


## 状态码

1xx: 信息性状态码,表示服务器已接收了客户端请求，客户端可继续发送请求

```
    100, 101
```

2xx: 成功状态码,

```
    200：OK
```

3xx: 重定向状态码,表示服务器要求客户端重定向

```
    301: 永久重定向, Location响应首部的值仍为当前URL，因此为隐藏重定向;

    302: 临时重定向，显式重定向, Location响应首部的值为新的URL

    304：Not Modified  未修改，比如本地缓存的资源文件和服务器上比较时，发现并没有修改，服务器返回一个304状态码，告诉浏览器，你不用请求该资源，直接使用本地的资源即可。
```

**附注**：

服务器给浏览器响应一个301永久重定向响应，这样浏览器就会访问`http://www.facebook.com/`而非`http://facebook.com/`。

为什么服务器一定要重定向而不是直接发送用户想看的网页内容呢？

其中一个原因跟**搜索引擎排名**有关。

如果一个页面有两个地址，就像`http://www.igoro.com/`和`http://igoro.com/`，搜索引擎会认为它们是两个网站，结果造成每个搜索链接都减少从而降低排名。

而搜索引擎知道301永久重定向是什么意思，这样就会把访问带www的和不带www的地址归到同一个网站排名下。

还有就是用不同的地址会造成缓存友好性变差，当一个页面有好几个名字时，它可能会在缓存里出现好几次。

4xx: 客户端错误状态码，表示客户端的请求有非法内容

```
   400 Bad Request 表示客户端请求有语法错误，不能被服务器所理解

   401 Unauthonzed 表示请求未经授权，该状态代码必须与 WWW-Authenticate 报头域一起使用

   403 Forbidden 表示服务器收到请求，但是拒绝提供服务，通常会在响应正文中给出不提供服务的原因
 
   404: Not Found  请求的URL资源并不存在
```

5xx: 服务器端错误状态码，表示服务器未能正常处理客户端的请求而出现意外错误

```
    500: Internal Server Error  服务器内部错误

    502: Bad Gateway  前面代理服务器联系不到后端的服务器时出现

    504：Gateway Timeout  这个是代理能联系到后端的服务器，但是后端的服务器在规定的时间内没有给代理服务器响应
```


## 请求过程

1、域名解析

2、浏览器与web服务器建立一个 TCP 连接

3、浏览器给Web服务器发送一个http请求

4、服务器的永久重定向响应

- 考虑代理服务器的重定向
- 考虑路由器的重定向


5、浏览器跟踪重定向地址

6、服务器“处理”请求

- 考虑缓存

7、服务器发回一个HTML响应

8、客户端浏览器解析HTML内容

9、浏览器获取嵌入在HTML中的对象